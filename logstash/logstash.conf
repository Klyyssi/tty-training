input {
  http {
    host => "0.0.0.0"
    port => "2000"
  }
}

filter {
  grok {
    match => { "message" => "%{GREEDYDATA:name}" }
    add_field => { "ordered" => 1 }
    remove_field => [ "host", "headers", "message" ]
  }
  mutate {
    convert => { "ordered" => "integer" }
  }
}

output {
  # file { path => "/var/log/logstash/events" }
  stdout { codec => rubydebug }
  mongodb  {
    collection => "orders"
    database => "ordersDB"
    uri => "mongodb://mongo:27017"
  }
}
